{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/helpers.js","../src/js/products-api.js","../src/img/furniture-list/1all_products.jpg","../src/img/furniture-list/7kitchens.jpg","../src/img/furniture-list/10furniture_hallway.jpg","../src/img/furniture-list/12garden_furnitures.jpg","../src/img/furniture-list/5tables.jpg","../src/img/furniture-list/2sofas.jpg","../src/img/furniture-list/8child_furniture.jpg","../src/img/furniture-list/13accessoires.jpg","../src/img/furniture-list/11furniture_washrooms.jpg","../src/img/furniture-list/9office_furnitures.jpg","../src/img/furniture-list/3wardrobe.jpg","../src/img/furniture-list/4beds.jpg","../src/img/furniture-list/6chairs.jpg","../src/js/refs.js","../src/js/render-functions.js","../src/js/handlers.js","../src/main.js"],"sourcesContent":["export const BASE_URL = 'https://furniture-store-v2.b.goit.study/api';\nexport const LIMIT = 8;\n\nexport const ENDPOINTS = {\n  CATEGORIES: 'categories',\n  FURNITURES: 'furnitures',\n  ORDERS: 'orders',\n  FEEDBACKS: 'feedbacks',\n};\n","export const activeFirstCategory = () => {\n  const firstCategory = document.querySelector(\n    '.furniture-categories-list-item'\n  );\n  if (firstCategory) {\n    firstCategory.classList.add('current-category');\n  }\n};\n","import axios from 'axios';\nimport { BASE_URL, ENDPOINTS, LIMIT } from './constants';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport let page = 1;\n\nexport const incrementPage = () => (page += 1);\nexport const getPage = () => page;\n\nexport const fetchCategories = async () => {\n  const { data } = await axios(`${ENDPOINTS.CATEGORIES}`);\n  return data;\n};\n\nexport const fetchFurniture = async (page = 1, categoryId = null) => {\n  const { data } = await axios(`${ENDPOINTS.FURNITURES}`, {\n    params: {\n      limit: LIMIT,\n      page: page,\n      category: categoryId,\n    },\n  });\n  return data;\n};\n","export default \"__VITE_ASSET__DxlImKq0__\"","export default \"__VITE_ASSET__D2iJQUHu__\"","export default \"__VITE_ASSET__CnQV5eOg__\"","export default \"__VITE_ASSET__DtQ8wwwB__\"","export default \"__VITE_ASSET__B$gH3S$5__\"","export default \"__VITE_ASSET__D4Xbg2Vl__\"","export default \"__VITE_ASSET__WWxIIM6H__\"","export default \"__VITE_ASSET__C9sQ4ILc__\"","export default \"__VITE_ASSET__IrWHMJ81__\"","export default \"__VITE_ASSET__CyStwM51__\"","export default \"__VITE_ASSET__JOK8xF7K__\"","export default \"__VITE_ASSET__Cy0ZaAQt__\"","export default \"__VITE_ASSET__Dy54ERuj__\"","import all from '../img/furniture-list/1all_products.jpg';\nimport kitchen from '../img/furniture-list/7kitchens.jpg';\nimport hallway from '../img/furniture-list/10furniture_hallway.jpg';\nimport garden from '../img/furniture-list/12garden_furnitures.jpg';\nimport table from '../img/furniture-list/5tables.jpg';\nimport sofa from '../img/furniture-list/2sofas.jpg';\nimport child from '../img/furniture-list/8child_furniture.jpg';\nimport accesoires from '../img/furniture-list/13accessoires.jpg';\nimport washroom from '../img/furniture-list/11furniture_washrooms.jpg';\nimport office from '../img/furniture-list/9office_furnitures.jpg';\nimport wardrobe from '../img/furniture-list/3wardrobe.jpg';\nimport bed from '../img/furniture-list/4beds.jpg';\nimport chair from '../img/furniture-list/6chairs.jpg';\n\nexport const refs = {\n  categoryList: document.querySelector('.furniture-categories-list'),\n  furnitureList: document.querySelector('.furniture-list'),\n  loader: document.querySelector('.loader'),\n  loadButton: document.querySelector('.button-load-more-furnitures'),\n};\n\nexport const categoryBackgroundImg = {\n  all,\n  '66504a50a1b2c3d4e5f6a7bd': kitchen,\n  '66504a50a1b2c3d4e5f6a7c0': hallway,\n  '66504a50a1b2c3d4e5f6a7c2': garden,\n  '66504a50a1b2c3d4e5f6a7bb': table,\n  '66504a50a1b2c3d4e5f6a7b8': sofa,\n  '66504a50a1b2c3d4e5f6a7be': child,\n  '66504a50a1b2c3d4e5f6a7c3': accesoires,\n  '66504a50a1b2c3d4e5f6a7c1': washroom,\n  '66504a50a1b2c3d4e5f6a7bf': office,\n  '66504a50a1b2c3d4e5f6a7b9': wardrobe,\n  '66504a50a1b2c3d4e5f6a7ba': bed,\n  '66504a50a1b2c3d4e5f6a7bc': chair,\n};\n","import { categoryBackgroundImg, refs } from './refs';\n\nrefs.loader.classList.add('visually-hidden');\n\nexport const renderCategories = data => {\n  const markup = data\n    .map(category => {\n      if (typeof category === 'string') {\n        const background = categoryBackgroundImg['all'];\n        return `\n          <li class=\"furniture-categories-list-item\" style=\"background-image: url('${background}')\">\n            <span class=\"category-name\">${category}</span>\n          </li>\n        `;\n      }\n\n      const background = categoryBackgroundImg[category._id];\n      return `\n        <li class=\"furniture-categories-list-item\" style=\"background-image: url('${background}')\" data-id=\"${category._id}\">\n          <p class=\"category-name\">${category.name}</p>\n        </li>\n      `;\n    })\n    .join('');\n\n  refs.categoryList.innerHTML = markup;\n};\n\nexport const renderProducts = data => {\n  return data.furnitures\n    .map(furniture => {\n      const firstImage = furniture.images[0];\n      const colors = furniture.color;\n\n      const colorCheckboxes = colors\n        .map(\n          color => `\n          <label class=\"color-checkbox\" style=\"--color: ${color}\">\n            <input type=\"radio\" name=\"color-${furniture._id}\" value=\"${color}\" style=\"accent-color: ${color}\" />\n            <span class=\"color-box\"></span>\n          </label>\n        `\n        )\n        .join('');\n\n      return `\n        <li class=\"product-card\">\n          <img src=\"${firstImage}\" alt=\"${furniture.name}\" class=\"furniture-card-img\" loading=\"lazy\" decoding=\"async\"/>\n          <p class=\"furniture-name\">${furniture.name}</p>\n          <div class=\"color-options\">${colorCheckboxes}</div>\n          <p class=\"furniture-price\">${furniture.price} грн</p>\n          <button type=\"button\" class=\"button button-furnitures-detail\">Детальніше</button>\n        </li>\n      `;\n    })\n    .join('');\n};\n\nexport const createGallery = furnitures => {\n  if (!refs.furnitureList) return;\n\n  const markup = renderProducts({ furnitures });\n  refs.furnitureList.insertAdjacentHTML('beforeend', markup);\n};\n\nexport const showLoader = () => {\n  refs.loader.classList.remove('visually-hidden');\n};\n\nexport const hideLoader = () => {\n  refs.loader.classList.add('visually-hidden');\n};\n\nexport const showButtonLoad = () => {\n  refs.loadButton.classList.remove('visually-hidden');\n};\n","import { activeFirstCategory } from './helpers';\nimport { fetchCategories, fetchFurniture, getPage } from './products-api';\nimport { refs } from './refs';\nimport {\n  hideLoader,\n  renderCategories,\n  renderProducts,\n  showButtonLoad,\n  showLoader,\n} from './render-functions';\n\nexport const getCategories = async () => {\n  showLoader();\n  try {\n    const categories = await fetchCategories();\n    renderCategories(['Всі товари', ...categories]);\n    activeFirstCategory();\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n};\n\nexport const getProducts = async () => {\n  showLoader();\n  try {\n    const response = await fetchFurniture(getPage());\n    const markup = renderProducts(response);\n    refs.furnitureList.insertAdjacentHTML('beforeend', markup);\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  showButtonLoad();\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { LIMIT } from './js/constants';\nimport { getCategories, getProducts } from './js/handlers';\nimport { fetchFurniture, getPage, incrementPage } from './js/products-api';\nimport { refs } from './js/refs';\nimport {\n  createGallery,\n  hideLoader,\n  renderProducts,\n  showButtonLoad,\n  showLoader,\n} from './js/render-functions';\n\nlet currentCategoryId = null;\n\ngetCategories();\ngetProducts();\nrefs.loadButton.addEventListener('click', async () => {\n  const nextPage = getPage() + 1;\n  try {\n    showLoader();\n    const response = await fetchFurniture(nextPage, currentCategoryId);\n    const totalItems = response.totalItems;\n    const totalpages = Math.ceil(totalItems / LIMIT);\n\n    if (nextPage > totalpages) {\n      refs.loadButton.classList.add('visually-hidden');\n      hideLoader();\n      return iziToast.error({\n        position: 'topRight',\n        message: 'Sorry there are no more products',\n      });\n    }\n\n    incrementPage();\n    createGallery(response.furnitures);\n    hideLoader();\n  } catch (error) {\n    console.error(error);\n  }\n\n  const firstCard = document.querySelector('.furniture-categories-list-item');\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 4,\n      behavior: 'smooth',\n    });\n  }\n});\n\nexport const onCategoryClick = async event => {\n  //\n  const li = event.target.closest('.furniture-categories-list-item');\n  if (!li) return;\n\n  document\n    .querySelectorAll('.furniture-categories-list-item')\n    .forEach(el => el.classList.remove('current-category'));\n\n  li.classList.add('current-category');\n  //\n  const categoryItem = event.target.closest('[data-id]');\n  let categoryId = null;\n  if (categoryItem) {\n    categoryId = categoryItem.dataset.id;\n  }\n  currentCategoryId = categoryId;\n  try {\n    const response = await fetchFurniture(1, categoryId);\n    refs.furnitureList.innerHTML = '';\n    const markup = renderProducts(response);\n    refs.furnitureList.insertAdjacentHTML('beforeend', markup);\n    showButtonLoad();\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nrefs.categoryList.addEventListener('click', onCategoryClick);\n"],"names":["BASE_URL","LIMIT","ENDPOINTS","activeFirstCategory","firstCategory","axios","page","incrementPage","getPage","fetchCategories","data","fetchFurniture","categoryId","all","kitchen","hallway","garden","table","sofa","child","accesoires","washroom","office","wardrobe","bed","chair","refs","categoryBackgroundImg","renderCategories","markup","category","renderProducts","furniture","firstImage","colorCheckboxes","color","createGallery","furnitures","showLoader","hideLoader","showButtonLoad","getCategories","categories","error","getProducts","response","currentCategoryId","nextPage","totalItems","totalpages","iziToast","firstCard","cardHeight","onCategoryClick","event","li","el","categoryItem"],"mappings":"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"}